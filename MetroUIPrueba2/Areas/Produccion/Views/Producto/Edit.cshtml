@model MetroUIPrueba2.Models.Producto
@{
    ViewBag.Title = "Edit";
    Layout = "~/Areas/Produccion/Views/Shared/_IntranetLayoutInsumos.cshtml";
}

<style>
    .login-form {
        width: 650px;
        height: auto;
        top: 50%;
        margin-top: -10px;
    }

    #principal {
        width: 900px;
        height: auto;
        top: 50%;
        margin-top: 60px;
        border: 1px solid green;
        padding: 50px;
        position: relative;
    }
</style>

@Html.ValidationSummary()
<div class="container" id="principal">
    <h3>Editar Producto</h3>
    <hr />
    <form class="bg-white p-6 mx-auto border bd-default win-shadow" method="POST" action="@Url.Action("Edit","Producto", new { id = Model.Id })">
        <table>
            <tr><td style="padding-right:15px;">Codigo Producto:</td><td style="padding-top:10px;"><input style="width:400px;" type="text" value="@Model.Codigo" name="Codigo" data-role="input" data-append="#" class="input-lg"></td></tr>
            <tr><td style="padding-right:15px;">Ingreso:</td><td style="padding-top: 10px;"><input style="width:347px;" type="text" value="@Model.Fecha" name="Fecha" data-role="input" class="input-lg" /></td></tr>
            <tr><td style="padding-right:15px;">Valoración:</td><td style="padding-top:10px;"><input id="cambio" style="width:400px;" type="text" value="@Model.Precio" name="Precio" data-role="input" data-append="$.00" class="input-lg"></td></tr>
            <tr><td style="padding-right:15px;">Imagen:</td><td style="padding-top:10px;"><input style="width:400px;" type="text" value="@Model.Imagen" name="Imagen" data-role="input" data-append="/Ruta" class="input-lg"></td></tr>
            <tr><td style="padding-right:15px;">Descripción:</td><td style="padding-top:10px;"><input style="width:400px;" type="text" value="@Model.Descripcion" name="Descripcion" data-role="input" data-append="$.00" class="input-lg"></td></tr>
            <tr>
                <td style="padding-right:15px;padding-top:20px;">Estado:</td>
                <td>
                    <select style="width:400px;" name="Estado" data-role="select" class="input-lg">
                        <option value="1">Produccion</option>
                        <option value="2">En Diseño</option>
                    </select>
                </td>
            </tr>
        </table><br />
        <div class="form-group">
            <button type="submit" id="cambio2" class="button success">Actualizar</button>
            <input type="button" class="button" value="Cancel">
        </div>
    </form>

</div>
<script type="text/javascript">

    function format(input) {
        var num = input.value.replace(/\./g, '');
        if (!isNaN(num)) {
            num = num.toString().split('').reverse().join('').replace(/(?=\d*\.?)(\d{3})/g, '$1.');
            num = num.split('').reverse().join('').replace(/^[\.]/, '');
            input.value = num;
        }

        else {
            alert('Solo se permiten numeros');
            input.value = input.value.replace(/[^\d\.]*/g, '');
        }
    }
</script>
<script>
    $('#cambio').on("myCustomEvent",function ( event ) {
        var text = $(this).text();
        $(this).text(text.replace('.', ''));
    });
    $("#cambio2").click(function () {
        $("#cambio").trigger("myCustomEvent");
    });  
</script>
